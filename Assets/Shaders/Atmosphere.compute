#include "Common.hlsl"

#pragma kernel CSMain

RWTexture2D<float3> _Result;

int _TextureSize;

[numthreads(8,8,1)]
void CSMain (uint2 id : SV_DispatchThreadID)
{
    float2 uv = id / (float)_TextureSize;
    float r, mu;
    GetRMuFromTransmittanceTextureUv(uv, r, mu);
    
    _Result[id.xy] = ComputeTransmittanceToTopAtmosphereBoundary(r, mu);
}
